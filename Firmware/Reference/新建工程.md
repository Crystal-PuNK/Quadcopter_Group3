# STM32F401RE开发环境

<img src="https://img-blog.csdnimg.cn/20210126213714814.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3BvcDU0MTExMQ==,size_16,color_FFFFFF,t_70#pic_center" alt=" " style="zoom:25%;" />

#### 预备资源

- [F4官方标准固件库](https://link.csdn.net/?target=https%3A%2F%2Fmy.st.com%2Fcontent%2Fmy_st_com%2Fen%2Fproducts%2Fembedded-software%2Fmcu-mpu-embedded-software%2Fstm32-embedded-software%2Fstm32-standard-peripheral-libraries.html)
- [用于F4系列的Keil-MDK5芯片的 `.pack` 安装包](https://link.csdn.net/?target=https%3A%2F%2Fwww.keil.com%2Fdd2%2FPack%2F%23%2Feula-container)
- [ST-LINK utility 驱动下载](https://link.csdn.net/?target=https%3A%2F%2Fwww.st.com%2Fcontent%2Fst_com%2Fen%2Fproducts%2Fdevelopment-tools%2Fsoftware-development-tools%2Fstm32-software-development-tools%2Fstm32-programmers%2Fstsw-link004.html)

## Keil上使用标准库的 STM32 开发流程

- #### 新建工程

    - 输入F401RE

    - 选上CMSIS-CORE和DEVICE-Startup两个选项

        ![image-20230909154036713](挑战一.assets/image-20230909154036713.png)

- #### 添加系列文件

    - ##### 新建文件夹

        - ![image-20231001173032612](./新建工程.assets/image-20231001173032612.png)
        - 将 `\STM32F4xx_DSP_StdPeriph_Lib_V1.9.0\Libraries\CMSIS\Device\ST\STM32F4xx\Include`中的 **stm32f4xx.h** 和 **system_stm32f4xx.h** 复制到 `Startup` 中
        - 将`\STM32F4xx_DSP_StdPeriph_Lib_V1.9.0\Libraries\STM32F4xx_StdPeriph_Driver` 中 `inc` 和 `src` 文件夹中的所有文件都复制到 `Library` 中
        - 将 `STM32F4xx_DSP_StdPeriph_Lib_V1.9.0\Project\STM32F4xx_StdPeriph_Templates` 中的 **stm32f4xx_conf.h**、**stm32f4xx_it.c** 和 **stm32f4xx_it.h** 复制到 User 中

    -  ##### 在Keil5中配置相关设置

        - Add Group

            - 在keil5工程中添加以上三个同名文件夹，并Add Existing Files。
            - 在User中新建main.c和main.h（直接复制粘贴官方样例工程中的也行）

            <img src="./新建工程.assets/image-20231001173944901.png" alt="image-20231001173944901" style="zoom: 33%;" />

        - 配置include路径

            - 点击魔术棒-c/c++-include path

            - 添加：

                <img src="./新建工程.assets/image-20231001174043500.png" alt="image-20231001174043500" style="zoom:33%;" />

        - 配置宏定义

            - 点击魔术棒-c/c++-include path

            - 添加：

                <img src="./新建工程.assets/image-20231001174121597.png" alt="image-20231001174121597" style="zoom: 50%;" />

        - 配置编译器

            - 点击魔术棒-Target

            - 选择 “Use default compiler version 5”

                <img src="./新建工程.assets/image-20231001174219258.png" alt="image-20231001174219258" style="zoom:50%;" />

        - 将 **stm32f4xx_fmc.c** 和  **stm32f4xx_fsmc.c** 移除编译列表

            > 很奇怪。这两个文件里有一大堆宏定义报错——显示Undefined。在官方给出的样例工程文件中，也将这两个文件移除了编译列表。

            <img src="./新建工程.assets/image-20231001174343116.png" alt="image-20231001174343116" style="zoom: 50%;" /> <img src="./新建工程.assets/image-20231001174612360.png" alt="image-20231001174612360" style="zoom: 50%;" /> <img src="./新建工程.assets/image-20231001174651844.png" alt="image-20231001174651844" style="zoom:25%;" />


- #### 配置下载器

    - 选择ST-Link Debugger

<img src="./新建工程.assets/image-20231001174821201.png" alt="image-20231001174821201" style="zoom: 67%;" />



## 消除250个WARNNING

修改这里11581~11585如下

![image-20231016194219799](./新建工程.assets/image-20231016194219799.png)





## CLion / VS code 开发环境

> “前方的区域以后再来探索吧!''